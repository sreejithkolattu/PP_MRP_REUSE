/*
 * Copyright (C) 2009-2014 SAP SE or an SAP affiliate company. All rights reserved
 */
jQuery.sap.declare("i2d.pp.mrpcockpit.reuse.util.Wave3CollaborationHelper");jQuery.sap.require("sap.ca.ui.message.message");jQuery.sap.require("i2d.pp.mrpcockpit.reuse.util.CommonConstants");i2d.pp.mrpcockpit.reuse.util.Wave3CollaborationHelper={setODataModel:function(m,b){this.oModelGlobal=m;this.backendVersion=b},_mapOData3ToOdata5:function(d){d.MRPElementChangedTotalQuantity=d.MRPElementChangeOpenQuantity;d.MRPElementOriginalTotalQty=d.MRPElementOpenQuantity;d.OrderQuantityUnitDcmls=d.TargetQuantityUnitDcmls;d.OrderUnitOfMeasureTechnicalName=d.UnitOfMeasureTechnicalName},_mapOData5ToOdata3:function(d){d.MRPElementChangeOpenQuantity=d.MRPElementChangedTotalQuantity;d.MRPElementOpenQuantity=d.MRPElementOriginalTotalQty;d.TargetQuantityUnitDcmls=d.OrderQuantityUnitDcmls;d.UnitOfMeasureTechnicalName=d.OrderUnitOfMeasureTechnicalName;d.MRPElementItem=this._adaptItemIdForMM(d.MRPElementItem)},_adaptItemIdForMM:function(i){var I=i;if(I.length>5){I=I.substring(1)}return I},readRequest:function(m){var u="/RequestNotes";var r=null;var f="MRPElement eq '";f+=m.PurchaseOrderID;f+="' and MRPElementItem eq '";f+=m.ItemID;f+="' and MRPElementScheduleLine eq '";f+=m.ScheduleLineID;f+="' and Type eq '";f+=m.Type;f+="'";var U=new Array();var t="$filter="+f;U.push(t);this.oModelGlobal.read(u,null,U,false,function(d,R){r=R.data.results[0]},function(e){r=null});return r},writeRequest:function(d,r){var f=false;var D=sap.ui.core.format.DateFormat.getDateTimeInstance({pattern:"yyyy-MM-dd"});var u="/RequestNotes";var o={};o.MRPElement=d.MRPElement;o.MRPElementItem=d.MRPElementItem;o.MRPElementScheduleLine=d.MRPElementScheduleLine;o.Vendor=d.Vendor;o.MaterialShortageSolutionType=d.MaterialShortageSolutionType;o.SolutionRequestStatus=d.SolutionRequestStatus;o.MaterialID=d.MaterialID;o.SolutionRequestNote=d.SolutionRequestNote;o.MaterialShortageSolnRequest="";o.DummyMrpReqNote="";o.MRPElementTargetQuantity=(d.MRPElementChangeOpenQuantity).toString();o.MRPElementOriginalQuantity=(d.MRPElementOpenQuantity).toString();var a=d.MRPElementChgAvailyOrRqmtDate;o.MRPElementTargetDate=D.format(a)+"T00:00:00";a=d.MRPElementAvailyOrRqmtDate;o.MRPElementOriginalDate=D.format(a)+"T00:00:00";this.oModelGlobal.create(u,o,null,function(){f=true},function(e){f=false});return f},deleteShortageAccept:function(m,r){this._mapOData5ToOdata3(m);var f=false;var d=sap.ui.core.format.DateFormat.getDateTimeInstance({pattern:"yyyy-MM-dd"});var a=d.format(m.MaterialShortageStartDate)+"T00:00:00";var b=d.format(m.MaterialShortageEndDate)+"T00:00:00";var u="/AcceptedShortages(MaterialShortageProfile='"+m.MaterialShortageProfile+"',MaterialShortageProfileCount='"+m.MaterialShortageProfileCount+"',MaterialID='"+m.MaterialID+"',MRPPlant='"+m.MRPPlant+"',MRPArea='"+m.MRPArea+"',MRPPlanningSegmentType='"+m.MRPPlanningSegmentType+"',MRPPlanningSegmentNumber='"+m.MRPPlanningSegmentNumber+"',MaterialShortageStartDate=datetime'"+a+"',MaterialShortageEndDate=datetime'"+b+"')";this.oModelGlobal.remove(u,{fnSuccess:function(){f=""},fnError:function(e){f=false}});return f},writeShortageAccept:function(d,r){this._mapOData5ToOdata3(d);var f=false;var D=sap.ui.core.format.DateFormat.getDateTimeInstance({pattern:"yyyy-MM-dd"});var u="/AcceptedShortages";var o={};o.MaterialShortageProfile=d.MaterialShortageProfile;o.MaterialShortageProfileCount=d.MaterialShortageProfileCount;o.MaterialID=d.MaterialID;o.MRPPlant=d.MRPPlant;o.MRPArea=d.MRPArea;o.MRPPlanningSegmentType=d.MRPPlanningSegmentType;o.MRPPlanningSegmentNumber=d.MRPPlanningSegmentNumber;o.MaterialShortageStartDate=D.format(d.MaterialShortageStartDate)+"T00:00:00";o.MaterialShortageEndDate=D.format(d.MaterialShortageEndDate)+"T00:00:00";o.MaterialShortageQuantity=(d.MaterialShortageQuantity).toString();o.AcceptShortageNote=d.SolutionRequestNote;this.oModelGlobal.create(u,o,null,function(){f=""},function(e){f=false});return f},deleteShortageAcceptBatch:function(m,h){this._mapOData5ToOdata3(m);var d=sap.ui.core.format.DateFormat.getDateTimeInstance({pattern:"yyyy-MM-dd"});var c=[];var D={};var a=d.format(m.MaterialShortageStartDate)+"T00:00:00";var b=d.format(m.MaterialShortageEndDate)+"T00:00:00";var u="/AcceptedShortages(MaterialShortageProfile='"+m.MaterialShortageProfile+"',MaterialShortageProfileCount='"+m.MaterialShortageProfileCount+"',MaterialID='"+m.MaterialID+"',MRPPlant='"+m.MRPPlant+"',MRPArea='"+m.MRPArea+"',MRPPlanningSegmentType='"+m.MRPPlanningSegmentType+"',MRPPlanningSegmentNumber='"+m.MRPPlanningSegmentNumber+"',MaterialShortageStartDate=datetime'"+encodeURIComponent(a)+"',MaterialShortageEndDate=datetime'"+encodeURIComponent(b)+"')";var o=i2d.pp.mrpcockpit.reuse.util.CommonConstants.CRUD_DELETE;var C=this.oModelGlobal.createBatchOperation(u,o,D,null);c.push(C);this.oModelGlobal.addBatchChangeOperations(c);this.oModelGlobal.submitBatch(h.fnSuccess,h.fnError,true);return""},createShortageAcceptBatch:function(d,h){this._mapOData5ToOdata3(d);var c=new Array();var D=sap.ui.core.format.DateFormat.getDateTimeInstance({pattern:"yyyy-MM-dd"});var o=i2d.pp.mrpcockpit.reuse.util.CommonConstants.CRUD_CREATE;var u="/AcceptedShortages";this.oModelGlobal.setUseBatch(true);this.oModelGlobal.clearBatch();var a={};a.MaterialShortageProfile=d.MaterialShortageProfile;a.MaterialShortageProfileCount=d.MaterialShortageProfileCount;a.MaterialID=d.MaterialID;a.MRPPlant=d.MRPPlant;a.MRPArea=d.MRPArea;a.MRPPlanningSegmentType=d.MRPPlanningSegmentType;a.MRPPlanningSegmentNumber=d.MRPPlanningSegmentNumber;a.MaterialShortageStartDate=D.format(d.MaterialShortageStartDate)+"T00:00:00";a.MaterialShortageEndDate=D.format(d.MaterialShortageEndDate)+"T00:00:00";a.MaterialShortageQuantity=(d.MaterialShortageQuantity).toString();a.AcceptShortageNote=d.SolutionRequestNote;var C=this.oModelGlobal.createBatchOperation(u,o,a,null);c.push(C);this.oModelGlobal.addBatchChangeOperations(c);this.oModelGlobal.submitBatch(h.fnSuccess,h.fnError,true);return""},writePurchaseOrder:function(d,r){var f=false;var u="/MMPurchaseOrderScheduleLines(PurchaseOrderID='";u+=d.MRPElement;u+="',ItemID='";u+=d.MRPElementItem;u+="',ScheduleLineID='";u+=d.MRPElementScheduleLine;u+="')";var D=d.MRPElementChgAvailyOrRqmtDate;var o=sap.ui.core.format.DateFormat.getDateTimeInstance({pattern:"yyyy-MM-dd"});var e={};e.DeliveryDate=o.format(D)+"T00:00:00";e.PurchasingDocumentOrderQty=(d.MRPElementChangeOpenQuantity).toString();var p={};p.sETag="W/\"'"+d.ChangeStateID+"'\"";p.fnSuccess=function(){f=true};p.fnError=function(E){f=false};p.bMerge=true;this.oModelGlobal.update(u,e,p);return f},writePurchaseRequisition:function(d,r){var f=false;var u="/MMPurchaseRequisitionItems(PurchaseRequisitionID='";u+=d.MRPElement;u+="',ItemID='";u+=d.MRPElementItem;u+="')";var D=d.MRPElementChgAvailyOrRqmtDate;var o=sap.ui.core.format.DateFormat.getDateTimeInstance({pattern:"yyyy-MM-dd"});var e={};e.DeliveryDate=o.format(D)+"T00:00:00";e.RequestedQuantity=(d.MRPElementChangeOpenQuantity).toString();e.PurchaseRequisitionIsFixed=true;var p={};p.sETag="W/\"'"+d.ChangeStateID+"'\"";p.fnSuccess=function(){f=true};p.fnError=function(E){f=false};p.bMerge=true;this.oModelGlobal.update(u,e,p);return f},writePurchaseOrderBatch:function(d,r,h){this._mapOData5ToOdata3(d);var c=new Array();var D=sap.ui.core.format.DateFormat.getDateTimeInstance({pattern:"yyyy-MM-dd"});if(!d.MRPElement||!d.MRPElementItem||!d.MRPElementScheduleLine||!d.MaterialShortageSolutionType||!d.MaterialID||!d.MRPElementChgAvailyOrRqmtDate||!d.MRPElementAvailyOrRqmtDate||!d.MRPElementOpenQuantity||!d.MRPElementChangeOpenQuantity){return"SOLUTION_DIALOG_MSG_MANDATORY_KEY_DATA_MISSING"}this.oModelGlobal.setUseBatch(true);this.oModelGlobal.clearBatch();var u="/MMPurchaseOrderScheduleLines(PurchaseOrderID='";u+=d.MRPElement;u+="',ItemID='";u+=d.MRPElementItem;u+="',ScheduleLineID='";u+=d.MRPElementScheduleLine;u+="')";var e={};var o=d.MRPElementChgAvailyOrRqmtDate;e.DeliveryDate=D.format(o)+"T00:00:00";e.PurchasingDocumentOrderQty=(d.MRPElementChangeOpenQuantity).toString();var p={};p.sETag="W/\"'"+d.ChangeStateID+"'\"";var C=this.oModelGlobal.createBatchOperation(u,"MERGE",e,p);c.push(C);u="/RequestNotes";var a={};a.MRPElement=d.MRPElement;a.MRPElementItem=d.MRPElementItem;a.MRPElementScheduleLine=d.MRPElementScheduleLine;a.Vendor=d.Vendor;a.MaterialShortageSolutionType=d.MaterialShortageSolutionType;a.SolutionRequestStatus=d.SolutionRequestStatus;a.MaterialID=d.MaterialID;a.SolutionRequestNote=d.SolutionRequestNote;a.MaterialShortageSolnRequest="";a.DummyMrpReqNote="";a.MRPElementTargetQuantity=(d.MRPElementChangeOpenQuantity).toString();a.MRPElementOriginalQuantity=(d.MRPElementOpenQuantity).toString();var o=d.MRPElementChgAvailyOrRqmtDate;a.MRPElementTargetDate=D.format(o)+"T00:00:00";o=d.MRPElementAvailyOrRqmtDate;a.MRPElementOriginalDate=D.format(o)+"T00:00:00";this.oModelGlobal.addBatchChangeOperations(c);this.oModelGlobal.submitBatch(h.fnSuccess,h.fnError,true);return""},writePurchaseRequisitionBatch:function(d,r,h){this._mapOData5ToOdata3(d);var c=new Array();var D=sap.ui.core.format.DateFormat.getDateTimeInstance({pattern:"yyyy-MM-dd"});if(!d.MRPElement||!d.MRPElementItem||!d.MaterialShortageSolutionType||!d.MaterialID||!d.MRPElementChgAvailyOrRqmtDate||!d.MRPElementAvailyOrRqmtDate||!d.MRPElementOpenQuantity||!d.MRPElementChangeOpenQuantity){return"SOLUTION_DIALOG_MSG_MANDATORY_KEY_DATA_MISSING"}this.oModelGlobal.setUseBatch(true);this.oModelGlobal.clearBatch();var u="/MMPurchaseRequisitionItems(PurchaseRequisitionID='";u+=d.MRPElement;u+="',ItemID='";u+=d.MRPElementItem;u+="')";var e={};var o=d.MRPElementChgAvailyOrRqmtDate;e.DeliveryDate=D.format(o)+"T00:00:00";e.RequestedQuantity=(d.MRPElementChangeOpenQuantity).toString();e.PurchaseRequisitionIsFixed=true;var p={};p.sETag="W/\"'"+d.ChangeStateID+"'\"";var C=this.oModelGlobal.createBatchOperation(u,"MERGE",e,p);c.push(C);u="/RequestNotes";var a={};a.MRPElement=d.MRPElement;a.MRPElementItem=d.MRPElementItem;a.MRPElementScheduleLine=d.MRPElementScheduleLine;a.Vendor=d.Vendor;a.MaterialShortageSolutionType=d.MaterialShortageSolutionType;a.SolutionRequestStatus=d.SolutionRequestStatus;a.MaterialID=d.MaterialID;a.SolutionRequestNote=d.SolutionRequestNote;a.MaterialShortageSolnRequest="";a.DummyMrpReqNote="";a.MRPElementTargetQuantity=(d.MRPElementChangeOpenQuantity).toString();a.MRPElementOriginalQuantity=(d.MRPElementOpenQuantity).toString();var o=d.MRPElementChgAvailyOrRqmtDate;a.MRPElementTargetDate=D.format(o)+"T00:00:00";o=d.MRPElementAvailyOrRqmtDate;a.MRPElementOriginalDate=D.format(o)+"T00:00:00";this.oModelGlobal.addBatchChangeOperations(c);this.oModelGlobal.submitBatch(h.fnSuccess,h.fnError,true);return""},createPurchaseOrderBatch:function(d,r,h){this._mapOData5ToOdata3(d);var c=new Array();var D=sap.ui.core.format.DateFormat.getDateTimeInstance({pattern:"yyyy-MM-dd"});var C=i2d.pp.mrpcockpit.reuse.util.CommonConstants;var M="00010";var f="0001";var A="01";if(!d.MRPElementChgAvailyOrRqmtDate||!M||!f||!d.PurchasingOrganisation||!d.MRPElementChangeOpenQuantity||!d.ReceivingPlant||!d.MaterialID||!d.MaterialBaseUnit||!A){return"SOLUTION_DIALOG_MSG_MANDATORY_KEY_DATA_MISSING"}if(d.MaterialShortageSolutionType===C.SOLUTIONTYPE_PO_CREATE&&!d.Vendor){return"SOLUTION_DIALOG_MSG_VENDOR_MISSING_PO"}if(d.MaterialShortageSolutionType===C.SOLUTIONTYPE_TO_CREATE&&!d.SupplyingPlant){return"SOLUTION_DIALOG_MSG_SUPPLYING_PLANT_MISSING_TO"}var s={};var o=d.MRPElementChgAvailyOrRqmtDate;s.ItemID=M;s.ScheduleLineID=f;if(!o){s.DeliveryDate=" "}else{s.DeliveryDate=D.format(o)+"T00:00:00"}s.PurchasingDocumentOrderQty=this.replaceEmptyValues((d.MRPElementChangeOpenQuantity).toString());var a=new Array();a.push(s);var g={};g.ItemID=M;g.AccountAssignmentID=A;g.SalesOrder=this.replaceEmptyValues(d.SalesOrder);g.SalesOrderItem=this.replaceEmptyValues(d.SalesOrderItem);g.WBSElement=this.replaceEmptyValues(d.WBSElement);var e=new Array();e.push(g);var i={};i.ItemID=M;i.AcctAssignmentCategory=this.replaceEmptyValues(d.AcctAssignmentCategory);i.Material=this.replaceEmptyValues(d.MaterialID);i.PurchasingDocumentOrderQty=this.replaceEmptyValues((d.MRPElementChangeOpenQuantity).toString());i.PurgDocOrderQuantityUnit=this.replaceEmptyValues(d.MaterialBaseUnit);i.ReceivingPlant=this.replaceEmptyValues(d.ReceivingPlant);i.SupplyingStorageLocation=this.replaceEmptyValues(d.SupplyingStorageLocation);i.ReceivingStorageLocation=this.replaceEmptyValues(d.ReceivingStorageLocation);i.PurchasingInfoRecord=this.replaceEmptyValues(d.PurchasingInfoRecord);i.PurchaseContract=this.replaceEmptyValues(d.PurchaseContract);i.PurchaseContractItem=this.replaceEmptyValues(d.PurchaseContractItem);i.MaterialGoodsReceiptDuration=this.replaceEmptyValues(d.MaterialGoodsReceiptDuration);i.MMPurchaseOrderScheduleLines=a;i.MMPurchaseOrderAccAssignments=e;var b=new Array();b.push(i);var u="/MMPurchaseOrderHeaders";var H={};H.PurchasingOrganisation=d.PurchasingOrganisation;H.PurchasingGroup=d.PurchasingGroup;H.CompanyCode=d.CompanyCode;H.Vendor=this.replaceEmptyValues(d.Vendor);H.SupplyingPlant=this.replaceEmptyValues(d.SupplyingPlant);if(d.MaterialShortageSolutionType===C.SOLUTIONTYPE_TO_CREATE){H.StockTransportOrderIndicator=true}else{H.StockTransportOrderIndicator=false}H.MMPurchaseOrderItems=b;var j=this.oModelGlobal.createBatchOperation(u,"POST",H,null);c.push(j);this.oModelGlobal.addBatchChangeOperations(c);this.oModelGlobal.submitBatch(h.fnSuccess,h.fnError,true);return""},replaceEmptyValues:function(v){if(!v){return" "}else{return v}},createPurchaseRequisitionBatch:function(d,r,h){this._mapOData5ToOdata3(d);var c=new Array();var D=sap.ui.core.format.DateFormat.getDateTimeInstance({pattern:"yyyy-MM-dd"});var C=i2d.pp.mrpcockpit.reuse.util.CommonConstants;var M="00010";var A="01";if(!d.MRPElementChgAvailyOrRqmtDate||!M||!d.MRPElementChangeOpenQuantity||!d.MaterialID||!d.MaterialBaseUnit||!A){return"SOLUTION_DIALOG_MSG_MANDATORY_KEY_DATA_MISSING"}if(d.MaterialShortageSolutionType===C.SOLUTIONTYPE_PO_CREATE&&!d.Vendor){return"SOLUTION_DIALOG_MSG_VENDOR_MISSING_PR"}if(d.MaterialShortageSolutionType===C.SOLUTIONTYPE_TO_CREATE&&!d.SupplyingPlant){return"SOLUTION_DIALOG_MSG_SUPPLYING_PLANT_MISSING_TR"}if(d.Vendor&&!d.PurchasingOrganisation){return"SOLUTION_DIALOG_MSG_PURCHASING_ORGANIZATION_MISSING_PR"}var a={};a.ItemID=M;a.AccountAssignmentID=A;a.SalesOrder=this.replaceEmptyValues(d.SalesOrder);a.SalesOrderItem=this.replaceEmptyValues(d.SalesOrderItem);a.WBSElement=this.replaceEmptyValues(d.WBSElement);var e=new Array();e.push(a);var i={};var o=d.MRPElementChgAvailyOrRqmtDate;i.ItemID=M;i.PurchasingOrganisation=this.replaceEmptyValues(d.PurchasingOrganisation);i.PurchasingGroup=this.replaceEmptyValues(d.PurchasingGroup);i.PurchasingDocumentItemCategory=this.replaceEmptyValues(d.MaterialProcurementType);i.SupplyingPlant=this.replaceEmptyValues(d.SupplyingPlant);i.AcctAssignmentCategory=this.replaceEmptyValues(d.AcctAssignmentCategory);i.Material=this.replaceEmptyValues(d.MaterialID);i.PurReqQuantityUnit=this.replaceEmptyValues(d.MaterialBaseUnit);i.ReceivingPlant=this.replaceEmptyValues(d.ReceivingPlant);i.SupplyingStorageLocation=this.replaceEmptyValues(d.SupplyingStorageLocation);i.ReceivingStorageLocation=this.replaceEmptyValues(d.ReceivingStorageLocation);i.PurchasingInfoRecord=this.replaceEmptyValues(d.PurchasingInfoRecord);i.PurchaseContract=this.replaceEmptyValues(d.PurchaseContract);i.PurchaseContractItem=this.replaceEmptyValues(d.PurchaseContractItem);i.RequestedQuantity=this.replaceEmptyValues((d.MRPElementChangeOpenQuantity).toString());i.FixedVendor=this.replaceEmptyValues(d.Vendor);if(!o){i.DeliveryDate=" "}else{i.DeliveryDate=D.format(o)+"T00:00:00"}i.MaterialGoodsReceiptDuration=this.replaceEmptyValues(d.MaterialGoodsReceiptDuration);i.MMPurchaseReqAccAssignments=e;i.PurchaseRequisitionIsFixed=true;var b=new Array();b.push(i);var u="/MMPurchaseRequisitionHeaders";var H={};H.MMPurchaseRequisitionItems=b;var f=this.oModelGlobal.createBatchOperation(u,"POST",H,null);c.push(f);this.oModelGlobal.addBatchChangeOperations(c);this.oModelGlobal.submitBatch(h.fnSuccess,h.fnError,true);return""},convertPurchaseRequisitionBatch:function(d,r,h){var c=new Array();var D=sap.ui.core.format.DateFormat.getDateTimeInstance({pattern:"yyyy-MM-dd"});var C=i2d.pp.mrpcockpit.reuse.util.CommonConstants;var M="00010";var e="0001";if(!d.MRPElementChgAvailyOrRqmtDate||!M||!e||!d.MRPElementChangeOpenQuantity||!d.MRPElement){return"SOLUTION_DIALOG_MSG_MANDATORY_KEY_DATA_MISSING"}if((d.MaterialShortageSolutionType===C.SOLUTIONTYPE_PR_CHANGE||d.MaterialShortageSolutionType===C.SOLUTIONTYPE_PR_INCREASE||d.MaterialShortageSolutionType===C.SSOLUTIONTYPE_PR_RESCHEDULE)&&!d.Vendor){return"SOLUTION_DIALOG_MSG_VENDOR_MISSING_PO"}if((d.MaterialShortageSolutionType===C.SOLUTIONTYPE_TOR_CHANGE||d.MaterialShortageSolutionType===C.SOLUTIONTYPE_TOR_INCREASE||d.MaterialShortageSolutionType===C.SOLUTIONTYPE_TOR_RESCHEDULE)&&!d.SupplyingPlant){return"SOLUTION_DIALOG_MSG_SUPPLYING_PLANT_MISSING_TO"}var s={};var o=d.MRPElementChgAvailyOrRqmtDate;s.ItemID=M;s.ScheduleLineID=e;if(!o){s.DeliveryDate=" "}else{s.DeliveryDate=D.format(o)+"T00:00:00"}s.PurchasingDocumentOrderQty=this.replaceEmptyValues((d.MRPElementChangeOpenQuantity).toString());var a=new Array();a.push(s);var i={};i.ItemID=M;i.MaterialGoodsReceiptDuration=this.replaceEmptyValues(d.MaterialGoodsReceiptDuration);i.PurchaseRequisition=this.replaceEmptyValues(d.MRPElement);i.PurchaseRequisitionItem=M;i.MMPurchaseOrderScheduleLines=a;var b=new Array();b.push(i);var u="/MMPurchaseOrderHeaders";var H={};if(d.MaterialShortageSolutionType===C.SOLUTIONTYPE_TOR_CHANGE||d.SolutionTyp===C.SOLUTIONTYPE_TOR_INCREASE||d.SolutionTyp===C.SOLUTIONTYPE_TOR_RESCHEDULE){H.StockTransportOrderIndicator=true}else{H.StockTransportOrderIndicator=false}H.MMPurchaseOrderItems=b;var f=this.oModelGlobal.createBatchOperation(u,"POST",H,null);c.push(f);this.oModelGlobal.addBatchChangeOperations(c);this.oModelGlobal.submitBatch(h.fnSuccess,h.fnError,true);return""},extractErrorMsgFromXml:function(x){var t="";try{var p=new DOMParser();var a=p.parseFromString(x,"text/xml");var m=a.getElementsByTagName("message");if(m.length>0){t=m[0].childNodes[0].nodeValue}else{var M=new sap.ui.model.json.JSONModel();M.setJSON(x);t=M.oData.error.message.value}}catch(e){var M=new sap.ui.model.json.JSONModel();M.setJSON(x);if(M.oData&&M.oData.error&&M.oData.error.message&&M.oData.error.message.value){t+=M.oData.error.message.value}else{t=x}}return t},extractErrorMsgFromBatchResponse:function(e){var E="";var t="";var r=null;for(var i=0;i<e.length;i++){if(i>0){E+="; "}r=e[i].response;t=i2d.pp.mrpcockpit.reuse.util.Wave3CollaborationHelper.extractErrorMsgFromXml(r.body);E+=t}return E}};
