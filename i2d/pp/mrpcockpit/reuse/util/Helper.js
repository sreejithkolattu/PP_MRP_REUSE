/*
 * Copyright (C) 2009-2014 SAP SE or an SAP affiliate company. All rights reserved
 */
jQuery.sap.declare("i2d.pp.mrpcockpit.reuse.util.Helper");jQuery.sap.require("sap.ca.ui.utils.Lessifier");i2d.pp.mrpcockpit.reuse.util.Helper={isBatchModeActive:function(){var n;if(n=="X"){return false}return true},factsheetNavigate:function(s,a,p){var f=sap.ushell&&sap.ushell.Container&&sap.ushell.Container.getService;this.oCrossAppNavigator=f&&f("CrossApplicationNavigation");if(this.oCrossAppNavigator){this.oCrossAppNavigator.toExternal({target:{semanticObject:s,action:a},params:p})}},getORMultiFilter:function(f,v){var o=new Array();for(var i=0;i<v.length;i++){o.push(new sap.ui.model.Filter(f,sap.ui.model.FilterOperator.EQ,v[i]))}var O=new sap.ui.model.Filter(o,false);return O},extractErrorMsgFromStream:function(b,x){var t="";try{var p=new DOMParser();var a=p.parseFromString(x,"text/xml");var m=[];if(a){m=a.getElementsByTagName("message")}if(m.length>0){if(m[0]&&m[0].childNodes[0]&&m[0].childNodes[0].nodeValue){t=m[0].childNodes[0].nodeValue}else{t=b.getText("SOLUTION_DIALOG_ERROR_UNKNOWN")}}else{var M=new sap.ui.model.json.JSONModel();M.setJSON(x);if(M.oData&&M.oData.error&&M.oData.error.message&&M.oData.error.message.value){t=M.oData.error.message.value}else{t=b.getText("SOLUTION_DIALOG_ERROR_UNKNOWN")}}}catch(e){var M=new sap.ui.model.json.JSONModel();M.setJSON(x);if(M.oData&&M.oData.error&&M.oData.error.message&&M.oData.error.message.value){t+=M.oData.error.message.value}else{t=x}}return t},extractErrorMsgFromBatchResponse:function(b,e){var E="";var t="";for(var i=0;i<e.length;i++){if(i>0){E+="; "}if(e[i].response&&e[i].response.body){t=i2d.pp.mrpcockpit.reuse.util.Helper.extractErrorMsgFromStream(b,e[i].response.body)}else{t=b.getText("SOLUTION_DIALOG_ERROR_UNKNOWN")}E+=t}return E},resizeUiControls:function(c,s,o){var p=jQuery("#"+c.getView().getId()+"--"+'panel');var S=$('.sapMRPSolutions').height();if(S===null||S===undefined){S=0}if(p&&p.length){var C=c.getView().byId("chart");var a;var w=0;var b=0;var d=0;var e=0;var f="";var g=0;b=p[0].offsetTop;w=p.width();a=p.parent();f=a.css("padding-bottom");g=(f)?parseInt(f):0;while((a.length!=0)&&!(a.attr('id')==c.getView().getId()+"--"+"mainPage-cont")){b+=a[0].offsetTop;a=a.parent()}d=(a)?a.height():0;f=(a)?a.css("border-bottom"):"";d+=(f)?parseInt(f):0;if(s===i2d.pp.mrpcockpit.reuse.util.CommonConstants.VIEW_S3){e=d-b-g}else if(s===i2d.pp.mrpcockpit.reuse.util.CommonConstants.VIEW_S4){e=d-b-g-S}else{e=d-b-g}if((w<64)&&(e<10)){return}if(w<64){C.setHeight((e-2)+"px");return}if(e<10){C.setWidth((w-64)+"px",true);return}if(o>0){e=e-o}var P=jQuery("#"+c.getView().getId()+"--"+'panelToolbar');e=e-P[0].offsetHeight;jQuery.sap.log.debug("set chart size of S3 chart: "+(w-64)+"x"+(e-10));C.setWidth((w-64)+"px",true);C.setHeight((e-2)+"px");var i=d-S;var h=i+"px";var j=c.getView().byId("oScrollContainer");if(j){j.setHeight(h)}}},convertStatusToMasterListStatus:function(d){var c=i2d.pp.mrpcockpit.reuse.util.CommonConstants;var s=c.MASTER_LIST_STATUS_SHORTAGE;if(d&&d.model&&d.model.cardModel&&d.model.cardModel.getData()){switch(d.model.cardModel.getData().SolutionRequestStatus){case c.REQUEST_STATUS_REQUESTED:s=c.MASTER_LIST_STATUS_PROCESSED;break;case c.REQUEST_STATUS_APPLIED:s=c.MASTER_LIST_STATUS_PROCESSED;break;case c.REQUEST_STATUS_DISCARDED:s=c.MASTER_LIST_STATUS_SHORTAGE;break;case c.REQUEST_STATUS_ANSWERED:s=c.MASTER_LIST_STATUS_PROCESSED;break;case c.REQUEST_STATUS_COLLECTED:s=c.MASTER_LIST_STATUS_PROCESSED;break;default:s=c.MASTER_LIST_STATUS_PROCESSED;break}}return s},lessifyCSSx30:function(){if(sap.ca.ui.utils.Lessifier){sap.ca.ui.utils.Lessifier.lessifyCSS("i2d.pp.mrpcockpit.reuse","styles/sapMRPx30.css",true);sap.ca.ui.utils.Lessifier.lessifyCSS("i2d.pp.mrpcockpit.reuse","controls/SolutionCards.css",true);sap.ca.ui.utils.Lessifier.lessifyCSS("i2d.pp.mrpcockpit.reuse","controls/Chart.css",true);sap.ca.ui.utils.Lessifier.lessifyCSS("i2d.pp.mrpcockpit.reuse","controls/Stock.css",true);sap.ca.ui.utils.Lessifier.lessifyCSS("i2d.pp.mrpcockpit.reuse","styles/sapMRPScrollbar.css",true)}},lessifyCSSx10:function(){if(sap.ca.ui.utils.Lessifier){sap.ca.ui.utils.Lessifier.lessifyCSS("i2d.pp.mrpcockpit.reuse","styles/sapMRPx10.css",true);sap.ca.ui.utils.Lessifier.lessifyCSS("i2d.pp.mrpcockpit.reuse","styles/sapMRPScrollbar.css",true)}},getSpecialTextForField:function(p,c,d){var s=function(a,b){var i,e=-1;for(i=0;i<a.length;i++){if(a[i][0]===b){e=i;break}}return e};if(!i2d.pp.mrpcockpit.reuse.util.CommonConstants.ONE_CODELINE_TEXT){return p}if(!d){if(!c){return p}else if(c.aDiffFieldText){d=c.aDiffFieldText}}if(d){var m=s(d,p);if(m>=0){if(d[m][1]){if(c.getServiceSchemaVersion()===i2d.pp.mrpcockpit.reuse.util.CommonConstants.BACKEND_MODEL_S){return d[m][1][1]}else{return d[m][1][0]}}else{return p}}else{return p}}else{return p}},getSpecialTextForFieldInt:function(o){var d={bGetText:false,sI18nID:null,oController:null,aDiffFieldText:null,iServiceVersion:null,sSoHI18nID:null,sModSI18nID:null};o=$.extend({},d,o);var m=null;var s=function(p,a){var i,b=-1;for(i=0;i<p.length;i++){if(p[i][0]===a){b=i;break}}return b};var g=function(S,D,a,M){var i=D;if(S){switch(S){case i2d.pp.mrpcockpit.reuse.util.CommonConstants.BACKEND_MODEL_S:if(M){i=M}break;default:if(a){i=a}break}}if(o.bGetText&&o.oController.oResourceBundle.getText){return o.oController.oResourceBundle.getText(i)}return i};if(!i2d.pp.mrpcockpit.reuse.util.CommonConstants.ONE_CODELINE_TEXT){return g(o.iServiceVersion,o.sI18nID,o.sI18nID,o.sI18nID)}if(!o.sI18nID){if(!(o.iServiceVersion&&o.sSoHI18nID&&o.sModSI18nID)){if(o.sSoHI18nID){return o.sSoHI18nID}else if(o.sModSI18nID){return o.sModSI18nID}else{return null}}}if(o.iServiceVersion&&o.sSoHI18nID&&o.sModSI18nID){return g(o.iServiceVersion,o.sI18nID,o.sSoHI18nID,o.sModSI18nID)}if(o.oController){if(!o.iServiceVersion){if(o.oController.getServiceSchemaVersion){o.iServiceVersion=o.oController.getServiceSchemaVersion()}else{o.iServiceVersion=2}}if(!o.aDiffFieldText){if(o.oController.aDiffFieldText){o.aDiffFieldText=o.oController.aDiffFieldText}else{return g(o.iServiceVersion,o.sI18nID,o.sSoHI18nID,o.sModSI18nID)}}if(o.aDiffFieldText){m=s(o.aDiffFieldText,o.sI18nID);if(m>=0){if(o.aDiffFieldText[m][1]){o.sSoHI18nID=o.aDiffFieldText[m][1][0];o.sModSI18nID=o.aDiffFieldText[m][1][1];return g(o.iServiceVersion,o.sI18nID,o.sSoHI18nID,o.sModSI18nID)}}}}else{if(o.aDiffFieldText&&o.iServiceVersion){m=s(o.aDiffFieldText,o.sI18nID);if(m>=0){if(o.aDiffFieldText[m][1]){return g(o.iServiceVersion,o.sI18nID,o.aDiffFieldText[m][1][0],o.aDiffFieldText[m][1][1])}}}}return o.sI18nID}};
